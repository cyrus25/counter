var SyncStateRemote = /*#__PURE__*/function () {
  function SyncStateRemote() {
    this.changeReadyMap = new Map();
  }

  var _proto = SyncStateRemote.prototype;

  _proto.processChange = function processChange(clientId, path, change) {
    var _this = this;

    setTimeout(function () {
      var changeReadyCallbacks = _this.changeReadyMap.get(clientId);

      if (changeReadyCallbacks) {
        changeReadyCallbacks.forEach(function (cb) {
          cb(path, change);
        });
      }
    }, 1000);
  };

  _proto.onChangeReady = function onChangeReady(clientId, cb) {
    var changeReadyCallbacks = this.changeReadyMap.get(clientId);

    if (!changeReadyCallbacks) {
      changeReadyCallbacks = [];
      this.changeReadyMap.set(clientId, changeReadyCallbacks);
    }

    var newLength = changeReadyCallbacks.push(cb);
    return function () {
      if (changeReadyCallbacks) {
        changeReadyCallbacks.splice(newLength - 1, 1);
      }
    };
  };

  return SyncStateRemote;
}();

export { SyncStateRemote };
//# sourceMappingURL=remote-server.esm.js.map
